{"version":3,"sources":["cypto/events.cljs"],"mappings":";AASA,yDAAA,zDAACA,sJAEA,EAAA,AAAAC,iDAAA,WAAYO,EAAEA;AAAd,AAAA,IAAAN,6BAAA;AAAA,AAAA,IAAA,AAAA,AAAAC,gDAAA,AAAA;;AAAA,IAAAC,wBACWK;AADX,AAAA,AAAAJ,iDAAA,2CAAA,8DAAA,EAAA,qEAAA,IAAA,yDAAAD,sBAAA,sDAAA,AAAA,yEAAA,qEAAA;;AAAAA;gBAAA,IAAAE,IAAAC;AAAA,AAAA,MAAAD;IAAA,WAAYE,EAAEA;AAAd,AACWC;;AAGZ,yDAAA,zDAACT,mJAEA,cAAAU,HAAKG;AAAL,AAAA,IAAAF,aAAAD;QAAA,AAAAE,4CAAAD,WAAA,IAAA,/DAASH;YAAT,AAAAI,4CAAAD,WAAA,IAAA,nEAAWG;AAAX,AACE,wDAAA,jDAACC,8CAAMF,wDAASC;;AAEnB,uBAAA,vBAACE,2EAEA,WAAKC,KAAKC;AAAV,AACE,0DAAA,nDAACH,8CAAME,yDAAU,uGAAA,KAAA,5GAACE,6CAAK,4CAAK,KAAAC;;AAG/B,yDAAA,zDAACC,sIAEA,WAAAC,SAAkBd;AAAlB,AAAA,IAAAe,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;SAAA,AAAAE,4CAAAF,eAAA,hEAAaV;AAAb,AAAA,kDAAA,kKAAA,iEAAA,2CAAA,uDAAA,mDAAA,mDAAA,8CAAA,2DAAA,OAAA,iOAAA,iEAAA,mFAAA,sGAAA,gEAAA,mFAAA,zlCACS,iDAAA,2DAAA,5GAACE,8CAAMF,wgBAIiB,+BAAA,2CAAA,8DAAA,xIAACa;;AAKnC,yDAAA,8FAAA,vJAACL,0OAEC,wDAAA,xDAACM,qHACF,WAAAC,SAAAC;AAAA,AAAA,IAAAC,aAAAF;IAAAE,iBAAA,AAAAN,4BAAAM;SAAA,AAAAL,4CAAAK,eAAA,hEAAajB;UAAb,AAAAY,4CAAAK,eAAA,jEAAgBE;IAAhBD,aAAAF;QAAA,AAAAjB,4CAAAmB,WAAA,IAAA,/DAAuBvB;eAAvB,AAAAI,4CAAAmB,WAAA,IAAA,tEAAyBE;AAAzB,AAAA,kDAAA,gDACO,wDAAA,gHAAA,xKAAClB,qDAAMF,wDAASoB,gHAAeD","names":["re_frame.core.reg_event_db","day8.re-frame.tracing/is-trace-enabled?","+debux-dbg-opts+","day8.re-frame.debux.common.util/send-form!","result__33251__auto__","day8.re-frame.debux.common.util/send-trace!","e","e36522","_","cypto.db/default-db","p__36523","vec__36524","cljs.core.nth","db","value","cljs.core.assoc","re-frame.core/reg-cofx","cofx","_data","cljs.core.subs","js/Date","re_frame.core.reg_event_fx","p__36527","map__36528","cljs.core/--destructure-map","cljs.core.get","ajax.core/json-response-format","re_frame.core.inject_cofx","p__36529","p__36530","map__36531","vec__36532","now","response"],"sourcesContent":["(ns cypto.events\n  (:require\n   [re-frame.core :as re-frame]\n   [cypto.db :as db]\n   [ajax.core :as ajax]\n   [day8.re-frame.http-fx]\n   [clojure.string :as str]\n   [day8.re-frame.tracing :refer-macros [fn-traced]]))\n\n(re-frame/reg-event-db\n ::initialize-db\n (fn-traced [_ _]\n            db/default-db))\n\n\n(re-frame/reg-event-db\n ::update-name\n (fn [db [_ value]]\n   (assoc db :name value)))\n\n(re-frame/reg-cofx\n :now\n (fn [cofx _data]\n   (assoc cofx :now (subs (str (js/Date.)) 15 24))))\n\n\n(re-frame/reg-event-fx\n ::fetch\n (fn [{:keys [db]} _]\n   {:db   (assoc db :loading true)\n    :http-xhrio {:method          :get\n                 :uri             \"https://api.binance.com/api/v3/ticker/price\"\n                 :timeout         8000\n                 :response-format (ajax/json-response-format {:keywords? true})\n                 :on-success      [::fetch-success]\n                 :on-failure      [:bad-http-result]}}))\n\n\n(re-frame/reg-event-fx              \n ::fetch-success\n [(re-frame/inject-cofx :now)]\n (fn [{:keys [db now]} [_ response]]                \n   {:db (assoc db :data response :time now)}))\n\n"]}